@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    --background: 255 255 255;
    --foreground: 15 23 42;
    --muted: 241 245 249;
    --muted-foreground: 100 116 139;
    --border: 226 232 240;
    --accent: 33 150 243;
    --accent-foreground: 255 255 255;
    --success: 34 197 94;
    --error: 239 68 68;
    --warning: 245 158 11;
  }

  .dark {
    color-scheme: dark;
    --background: 20 20 30;
    --foreground: 226 232 240;
    --muted: 30 30 46;
    --muted-foreground: 148 163 184;
    --border: 51 51 76;
    --accent: 59 130 246;
    --accent-foreground: 255 255 255;
    --success: 34 197 94;
    --error: 239 68 68;
    --warning: 245 158 11;
  }

  body {
    @apply bg-editor-light dark:bg-editor-dark text-gray-900 dark:text-gray-100;
    @apply font-sans antialiased;
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
  }

  /* Editor and markdown styling */
  .editor-area {
    @apply font-mono text-base leading-relaxed;
    min-height: 300px;
  }

  .markdown-preview {
    @apply prose dark:prose-dark max-w-none break-words;
  }

  .markdown-preview pre {
    @apply font-mono bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-x-auto;
  }

  .markdown-preview code {
    @apply font-mono bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded-md text-sm;
  }

  .markdown-preview pre code {
    @apply bg-transparent p-0;
  }

  .markdown-preview blockquote {
    @apply border-l-4 border-gray-300 dark:border-gray-700 pl-4 italic;
  }

  .markdown-preview a {
    @apply text-primary-600 dark:text-primary-400 hover:underline;
  }

  .markdown-preview h1, 
  .markdown-preview h2, 
  .markdown-preview h3, 
  .markdown-preview h4, 
  .markdown-preview h5, 
  .markdown-preview h6 {
    @apply font-semibold text-gray-900 dark:text-gray-100;
  }

  .markdown-preview h1 {
    @apply text-3xl mt-8 mb-4 pb-2 border-b border-gray-200 dark:border-gray-800;
  }

  .markdown-preview h2 {
    @apply text-2xl mt-6 mb-3 pb-1 border-b border-gray-200 dark:border-gray-800;
  }

  .markdown-preview h3 {
    @apply text-xl mt-5 mb-2;
  }

  .markdown-preview h4 {
    @apply text-lg mt-4 mb-2;
  }

  /* Scrollbars */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-700 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-600;
  }

  /* User cursor */
  .user-cursor {
    @apply absolute pointer-events-none;
    transition: transform 0.1s ease-out;
  }

  .user-cursor .name-flag {
    @apply rounded text-xs text-white px-1.5 py-0.5 whitespace-nowrap;
    transform: translate(-6px, -100%);
  }

  .user-cursor .cursor {
    @apply w-[2px] h-[20px] absolute;
    transform: translateX(-50%);
  }

  /* Code syntax highlighting */
  .hljs {
    @apply block overflow-auto bg-gray-100 dark:bg-gray-800 p-4 rounded-md;
  }

  .hljs-comment,
  .hljs-quote {
    @apply text-gray-500 dark:text-gray-500 italic;
  }

  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-subst {
    @apply text-purple-600 dark:text-purple-400 font-semibold;
  }

  .hljs-string,
  .hljs-symbol,
  .hljs-bullet,
  .hljs-attribute {
    @apply text-emerald-600 dark:text-emerald-400;
  }

  .hljs-title,
  .hljs-section {
    @apply text-blue-600 dark:text-blue-400;
  }

  .hljs-name,
  .hljs-type,
  .hljs-tag {
    @apply text-red-600 dark:text-red-400;
  }

  /* Toolbar buttons */
  .toolbar-button {
    @apply rounded-md p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none;
  }

  .toolbar-button.active {
    @apply bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300;
  }

  /* CodeMirror specific styling */
  .cm-editor {
    @apply font-mono text-base leading-relaxed;
    height: 100%;
  }

  .cm-editor.cm-focused {
    outline: none;
  }

  .cm-editor .cm-line {
    @apply py-0.5;
  }
}

@layer components {
  .button-primary {
    @apply px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-md 
           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 
           transition duration-150 ease-in-out;
  }

  .button-secondary {
    @apply px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 
           text-gray-800 dark:text-gray-200 font-medium rounded-md 
           focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600 
           focus:ring-opacity-50 transition duration-150 ease-in-out;
  }

  .input {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 
           rounded-md bg-white dark:bg-gray-800 
           text-gray-900 dark:text-gray-100 
           focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-500;
  }

  .card {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-subtle dark:shadow-subtle-dark 
           border border-gray-200 dark:border-gray-700 overflow-hidden;
  }

  .panel {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-subtle dark:shadow-subtle-dark 
           border border-gray-200 dark:border-gray-700;
  }

  .sidebar-item {
    @apply flex items-center gap-2 px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 
           hover:bg-gray-200 dark:hover:bg-gray-700 
           cursor-pointer transition-colors duration-150;
  }

  .sidebar-item.active {
    @apply bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300;
  }
}